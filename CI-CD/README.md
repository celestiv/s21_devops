# Basic CI/CD

## Part 1 

Почему-то git push автоматически не приводил к запуску пайплайнов 
на гитлабе. В моем случае проблема решилась созданием и запуском пайплайна вручную 
в интерфейсе на сайте. Только после этого происходило подключение виртуальной машины 
и ее "активация" в качестве исполнителя пайплайнов для данного таска. 

На данный момент мои знания CI-CD не позволяют понять, насколько это правильно или нет

##  Описание решения

1. Устанавливаем gitlab-runner Ubuntu x86-64 с [официального сайта](https://docs.gitlab.com/runner/install/)

2. ```gitlab-runner register``` - регистрация раннера, его подключение к репозиторию и настройка
  в качестве исполнителя

  * Указываем теги: build, style, test, deploy
  * описание я не указывал
  * executor выбираем shell, так как работаем с виртуальной машиной на базе Ubuntu 
    без использования docker, VirtualBox или других программ

3. ```sudo systemctl enable --now gitlab-runner``` - обеспечиваем чтобы раннер работал в фоновом режиме 
  без нашего участия

4. Создаем 2 виртуальные машины, в моем случае **runner** и **deploy**
    Настраиваем между ними сеть, как в проекте Linux Network

5. Создаем для пользователя **gitlab-runner** пароль командой ```passwd```

6. Переходим на пользователя **gitlab-runner** и дальнейшие действия совершаем от его имени

7. Создаем ssh ключ```ssh-keygen -t rsa```

8. ```ssh-copy-id celestiv@172.24.116.9```

9. ```scp s21_cat s21_grep celestiv@172.24.116.9:/usr/local/bin```